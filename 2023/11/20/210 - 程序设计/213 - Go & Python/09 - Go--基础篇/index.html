<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Go--基础篇 | 梦之痕</title><meta name="author" content="梦之痕"><meta name="copyright" content="梦之痕"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="0 参考资料GO开源项目收集：https:&#x2F;&#x2F;github.com&#x2F;avelino&#x2F;awesome-go 01 第一章 Go语言简介1.1 工作区和GOPATH工作区是放置Go源码文件的目录工作区下边有pkg、src、bin三个目录  pkg目录  用于存放归档文件（名称以.a为后缀的文件），所有归档文件都会被存放到该目录下的平台相关目录中，同样以代码包为组织形式  bin目录  用于存放当前工作">
<meta property="og:type" content="article">
<meta property="og:title" content="Go--基础篇">
<meta property="og:url" content="https://baihlup.github.io/2023/11/20/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/09%20-%20Go--%E5%9F%BA%E7%A1%80%E7%AF%87/index.html">
<meta property="og:site_name" content="梦之痕">
<meta property="og:description" content="0 参考资料GO开源项目收集：https:&#x2F;&#x2F;github.com&#x2F;avelino&#x2F;awesome-go 01 第一章 Go语言简介1.1 工作区和GOPATH工作区是放置Go源码文件的目录工作区下边有pkg、src、bin三个目录  pkg目录  用于存放归档文件（名称以.a为后缀的文件），所有归档文件都会被存放到该目录下的平台相关目录中，同样以代码包为组织形式  bin目录  用于存放当前工作">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2024/41710043961_.pic.jpg">
<meta property="article:published_time" content="2023-11-20T16:27:41.000Z">
<meta property="article:modified_time" content="2024-08-04T08:59:30.496Z">
<meta property="article:author" content="梦之痕">
<meta property="article:tag" content="程序设计">
<meta property="article:tag" content="Go">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2024/41710043961_.pic.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://baihlup.github.io/2023/11/20/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&amp;%20Python/09%20-%20Go--%E5%9F%BA%E7%A1%80%E7%AF%87/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go--基础篇',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-04 08:59:30'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2024/41710043961_.pic.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="梦之痕"><span class="site-name">梦之痕</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Go--基础篇</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-20T16:27:41.000Z" title="Created 2023-11-20 16:27:41">2023-11-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-08-04T08:59:30.496Z" title="Updated 2024-08-04 08:59:30">2024-08-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Go-Python/">Go &amp; Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Go--基础篇"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="0-参考资料"><a href="#0-参考资料" class="headerlink" title="0 参考资料"></a>0 参考资料</h2><p><strong>GO开源项目收集</strong>：<a target="_blank" rel="noopener" href="https://github.com/avelino/awesome-go">https://github.com/avelino/awesome-go</a></p>
<h2 id="01-第一章-Go语言简介"><a href="#01-第一章-Go语言简介" class="headerlink" title="01 第一章 Go语言简介"></a>01 第一章 Go语言简介</h2><h3 id="1-1-工作区和GOPATH"><a href="#1-1-工作区和GOPATH" class="headerlink" title="1.1 工作区和GOPATH"></a>1.1 工作区和GOPATH</h3><p>工作区是放置Go源码文件的目录<br>工作区下边有pkg、src、bin三个目录</p>
<ul>
<li>pkg目录</li>
</ul>
<p>用于存放归档文件（名称以.a为后缀的文件），所有归档文件都会被存放到该目录下的平台相关目录中，同样以代码包为组织形式</p>
<ul>
<li>bin目录</li>
</ul>
<p>用于存放当前工作区中的Go程序的可执行文件</p>
<ol>
<li>当环境变量GOBIN已有效设置时，该目录会变的无意义</li>
<li>当GOPATH的值中包含多个工作区的路径时，必须设置GOBIN，否则无法成功安装Go程序的可执行文件</li>
</ol>
<h3 id="1-2-代码包的导入"><a href="#1-2-代码包的导入" class="headerlink" title="1.2 代码包的导入"></a>1.2 代码包的导入</h3><ul>
<li>本地化导入</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> . <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">HasPrefix(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;a&quot;</span>) <span class="comment">//导入后使用函数不需要加包名</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-包管理"><a href="#1-3-包管理" class="headerlink" title="1.3 包管理"></a>1.3 包管理</h3><h4 id="1-3-1-Go的依赖管理"><a href="#1-3-1-Go的依赖管理" class="headerlink" title="1.3.1 Go的依赖管理"></a>1.3.1 Go的依赖管理</h4><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011316490.png"></p>
<h4 id="1-3-2-go-mod"><a href="#1-3-2-go-mod" class="headerlink" title="1.3.2 go mod"></a>1.3.2 go mod</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> mod init mod名称</span><br><span class="line"><span class="keyword">go</span> build 源码文件</span><br><span class="line"><span class="keyword">go</span> mod download 下载依赖包</span><br><span class="line"><span class="keyword">go</span> mod tidy 更新<span class="keyword">go</span>.mod依赖记录</span><br><span class="line"><span class="keyword">go</span> mod verify 校验<span class="keyword">go</span>.mod文件或依赖包源码</span><br><span class="line"><span class="keyword">go</span> mod why 查看依赖信息，为什么依赖</span><br><span class="line"><span class="keyword">go</span> mod edit</span><br><span class="line"><span class="keyword">go</span> mod vendor</span><br></pre></td></tr></table></figure>

<ul>
<li>go mod edit 修改mod信息</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> mod edit -module test</span><br><span class="line"><span class="keyword">go</span> mod edit -require github.com/hashicorp/golang-lru@<span class="number">0.5</span><span class="number">.3</span> 添加依赖包到mod</span><br><span class="line"><span class="keyword">go</span> mod edit -fmt 格式化mod文件</span><br><span class="line"><span class="keyword">go</span> mod edit -exclude 排除某个依赖包</span><br><span class="line"><span class="keyword">go</span> mod edit -exclude github.com/hashicorp/golang-lru@<span class="number">0.5</span><span class="number">.2</span> 不能依赖此包 </span><br><span class="line"><span class="keyword">go</span> mod edit -dropexclude github.com/hashicorp/golang-lru@<span class="number">0.5</span><span class="number">.2</span> 删除<span class="keyword">go</span>.mod中的配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>go.mod</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module baihl</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.15</span></span><br><span class="line"></span><br><span class="line">exclude github.com/hashicorp/golang-lru <span class="number">0.5</span><span class="number">.2</span></span><br></pre></td></tr></table></figure>



<ul>
<li>go mod vendor</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> mod vendor 生成vendor目录存放依赖包</span><br></pre></td></tr></table></figure>

<h3 id="1-4-总结"><a href="#1-4-总结" class="headerlink" title="1.4 总结"></a>1.4 总结</h3><ul>
<li>列出依赖</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> mod graph</span><br><span class="line"><span class="keyword">go</span> mod why</span><br><span class="line"><span class="keyword">go</span> list -m all</span><br></pre></td></tr></table></figure>

<ul>
<li>添加依赖</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get </span><br><span class="line"><span class="keyword">go</span> build</span><br><span class="line"><span class="keyword">go</span> mod edit require</span><br><span class="line"><span class="keyword">go</span> mod download</span><br></pre></td></tr></table></figure>
<h2 id="02-第二章-基本程序结构"><a href="#02-第二章-基本程序结构" class="headerlink" title="02 第二章 基本程序结构"></a>02 第二章 基本程序结构</h2><h3 id="2-1-退出返回值"><a href="#2-1-退出返回值" class="headerlink" title="2.1 退出返回值"></a>2.1 退出返回值</h3><p>与其他语言不同，Go中main函数不支持任何返回值<br>通过os.Exit来返回状态</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">1</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Hello World&quot;</span>, os.Args[<span class="number">1</span>])</span><br><span class="line">	&#125;</span><br><span class="line">	os.Exit(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Process finished with exit code 2</span><br></pre></td></tr></table></figure>

<h3 id="2-2-获取命令行参数"><a href="#2-2-获取命令行参数" class="headerlink" title="2.2 获取命令行参数"></a>2.2 获取命令行参数</h3><p>与其他语言不同，main函数不支持传入参数<br>在程序中使用os.Args获取命令行参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">2</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Hello World&quot;</span>, os.Args[<span class="number">1</span>], os.Args[<span class="number">2</span>])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#go run hello_world.go bai haoliang</span><br><span class="line">Hello World bai haoliang</span><br></pre></td></tr></table></figure>

<h3 id="2-3-编写测试程序"><a href="#2-3-编写测试程序" class="headerlink" title="2.3 编写测试程序"></a>2.3 编写测试程序</h3><ol>
<li>源码文件以_test结尾：XXX_test.go</li>
<li>测试方法名以Test开头：<code>func TestXXX(t *testing.T) &#123;...&#125;</code></li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFibList</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	b := <span class="number">1</span></span><br><span class="line">	t.Log(a)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		t.Log(<span class="string">&quot; &quot;</span>, b)</span><br><span class="line">		tmp := a</span><br><span class="line">		a = b</span><br><span class="line">		b = tmp + a</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-变量赋值"><a href="#2-4-变量赋值" class="headerlink" title="2.4 变量赋值"></a>2.4 变量赋值</h3><ol>
<li>赋值可以进行自动类型推断</li>
<li>在一个赋值语句中可以对多个变量进行同时赋值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var b int = 1</span><br><span class="line">a := 1</span><br><span class="line">c, d := 1, 2</span><br></pre></td></tr></table></figure>

<h3 id="2-5-常量的定义"><a href="#2-5-常量的定义" class="headerlink" title="2.5 常量的定义"></a>2.5 常量的定义</h3><p>快速设置连续值</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  Monday = <span class="literal">iota</span> + <span class="number">1</span></span><br><span class="line">  Tuesday</span><br><span class="line">  Wednesday</span><br><span class="line">  Thursday</span><br><span class="line">  Friday</span><br><span class="line">  Saturday</span><br><span class="line">  Sunday</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>按位设置</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  Open = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span></span><br><span class="line">  Close</span><br><span class="line">  Pending</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> constant_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	Monday = <span class="number">1</span> + <span class="literal">iota</span></span><br><span class="line">	Tuesday</span><br><span class="line">	Wednesday</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	Readable = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span></span><br><span class="line">	Writable</span><br><span class="line">	Executable</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestConstantTry</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	t.Log(Monday, Tuesday)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestConstantTry1</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span> <span class="comment">//0001</span></span><br><span class="line">	t.Log(a&amp;Readable == Readable, a&amp;Writable == Writable, a&amp;Executable == Executable)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-常量的使用"><a href="#2-5-常量的使用" class="headerlink" title="2.5 常量的使用"></a>2.5 常量的使用</h3><p>const数值可作为各种类型使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filename = <span class="string">&quot;abc.txt&quot;</span></span><br><span class="line"><span class="keyword">const</span> a, b = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">var</span> c <span class="type">int</span> = <span class="type">int</span>(math.Sqrt(a * a + b * b))</span><br></pre></td></tr></table></figure>

<h3 id="2-6-基本数据类型"><a href="#2-6-基本数据类型" class="headerlink" title="2.6 基本数据类型"></a>2.6 基本数据类型</h3><ul>
<li>基本数据类型</li>
</ul>
<p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011317685.png"></p>
<ul>
<li>类型转化</li>
</ul>
<ol>
<li>Go语言不允许隐式类型转换</li>
<li>别名和原有类型也不能进行隐式转换</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyInt <span class="type">int64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestImplicit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="type">int32</span> = <span class="number">1</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="type">int64</span></span><br><span class="line">	b = <span class="type">int64</span>(a)</span><br><span class="line">	<span class="keyword">var</span> c MyInt</span><br><span class="line">	c = MyInt(b)</span><br><span class="line">	<span class="comment">//b = c           // 隐式类型转换 error</span></span><br><span class="line">	t.Log(a, b, c) <span class="comment">// 1 1 1</span></span><br><span class="line">	t.Log(math.MaxFloat32)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>基本的预定义值</li>
</ul>
<ol>
<li>math.MaxInt64</li>
<li>math.MaxFloat64</li>
<li>math.MaxUint32</li>
</ol>
<ul>
<li>指针类型</li>
</ul>
<ol>
<li>不支持指针运算</li>
<li>string 是值类型，其默认的初始化为空字符串，而不是nil</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPoint</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := <span class="number">1</span></span><br><span class="line">	aPtr := &amp;a</span><br><span class="line">	<span class="comment">//aPtr = aPtr + 1</span></span><br><span class="line">	t.Log(a, aPtr)   <span class="comment">// 1 0xc0000a6100</span></span><br><span class="line">	t.Logf(<span class="string">&quot;%T %T&quot;</span>, a, aPtr)  <span class="comment">// int *int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestString</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="type">string</span></span><br><span class="line">	t.Log(<span class="string">&quot;*&quot;</span> + s + <span class="string">&quot;*&quot;</span>) <span class="comment">//初始化零值是“”  **</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(s))  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义指针类型</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mMap := <span class="built_in">new</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2-6-1-指针-数组指针-指针数组"><a href="#2-6-1-指针-数组指针-指针数组" class="headerlink" title="2.6.1 指针&#x2F;数组指针&#x2F;指针数组"></a>2.6.1 指针&#x2F;数组指针&#x2F;指针数组</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPoint</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> count <span class="type">int</span> = <span class="number">20</span></span><br><span class="line">	<span class="keyword">var</span> countPoint *<span class="type">int</span></span><br><span class="line">	countPoint = &amp;count</span><br><span class="line">	fmt.Println(<span class="string">&quot;count 的地址 ： &quot;</span>, countPoint)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPointArr</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//指针数组</span></span><br><span class="line">	a, b := <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">	pointArr := [...]*<span class="type">int</span>&#123;&amp;a, &amp;b&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;指针数组 pointArr : &quot;</span>, pointArr)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//数组指针</span></span><br><span class="line">	arr := [...]<span class="type">int</span>&#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	arrPoint := &amp;arr</span><br><span class="line">	fmt.Println(<span class="string">&quot;数组指针 arrPoint : &quot;</span>, arrPoint)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	TestPoint()</span><br><span class="line">	TestPointArr()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">count 的地址 ：  0xc000012090</span><br><span class="line">指针数组 pointArr :  [0xc000012098 0xc0000120b0]</span><br><span class="line">数组指针 arrPoint :  &amp;[3 4 5]</span><br></pre></td></tr></table></figure>

<h4 id="2-6-2-指针使用"><a href="#2-6-2-指针使用" class="headerlink" title="2.6.2 指针使用"></a>2.6.2 指针使用</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">	X, Y <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过指针修改Vertex中的值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Scale(f <span class="type">float64</span>) &#123;</span><br><span class="line">	v.X = v.X * f</span><br><span class="line">	v.Y = v.Y * f</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	v.Scale(<span class="number">10</span>)</span><br><span class="line">	fmt.Println(v.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="2-6-2-结构体"><a href="#2-6-2-结构体" class="headerlink" title="2.6.2 结构体"></a>2.6.2 结构体</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID   <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dog := <span class="built_in">new</span>(Dog) <span class="comment">//定义指针类型</span></span><br><span class="line">	dog.ID = <span class="number">1</span></span><br><span class="line">	dog.Name = <span class="string">&quot;Tom&quot;</span></span><br><span class="line">	dog.Age = <span class="number">12</span></span><br><span class="line">	fmt.Println(dog)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-7-算术运算符"><a href="#2-7-算术运算符" class="headerlink" title="2.7 算术运算符"></a>2.7 算术运算符</h3><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011317301.png"></p>
<p><strong>注意：</strong> Go语言没有前置的++，–，如（++a）</p>
<h3 id="2-8-比较运算符"><a href="#2-8-比较运算符" class="headerlink" title="2.8 比较运算符"></a>2.8 比较运算符</h3><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011318348.png"></p>
<p>可以使用&#x3D;&#x3D;比较数组</p>
<ol>
<li>相同维数且含有相同个数元素的数组才可以比较</li>
<li>每个元素都相同的才相等</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCompareArray</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	b := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>&#125;</span><br><span class="line">	<span class="comment">//	c := [...]int&#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line">	d := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	t.Log(a == b)    <span class="comment">// false</span></span><br><span class="line">	<span class="comment">//t.Log(a == c)</span></span><br><span class="line">	t.Log(a == d)    <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-9-逻辑运算符"><a href="#2-9-逻辑运算符" class="headerlink" title="2.9 逻辑运算符"></a>2.9 逻辑运算符</h3><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011318820.png"></p>
<h3 id="2-10-位运算符"><a href="#2-10-位运算符" class="headerlink" title="2.10 位运算符"></a>2.10 位运算符</h3><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011319794.png"></p>
<p>Go语言多了一种位运算符 &amp;^ （按位置零）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1&amp;^0-- 1 </span><br><span class="line">1&amp;^1-- 0 </span><br><span class="line">0&amp;^1-- 0 </span><br><span class="line">0&amp;^0-- 0</span><br></pre></td></tr></table></figure>
<p>把指定位置零</p>
<p><strong>示例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	Readable = <span class="number">1</span> &lt;&lt; <span class="literal">iota</span></span><br><span class="line">	Writable</span><br><span class="line">	Executable</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestBitClear</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := <span class="number">7</span> <span class="comment">//0111</span></span><br><span class="line">	a = a &amp;^ Readable</span><br><span class="line">	a = a &amp;^ Executable</span><br><span class="line">	t.Log(a&amp;Readable == Readable, a&amp;Writable == Writable, a&amp;Executable == Executable)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">false true false</span><br></pre></td></tr></table></figure>

<h3 id="2-11-循环语句"><a href="#2-11-循环语句" class="headerlink" title="2.11 循环语句"></a>2.11 循环语句</h3><p>与其他语言不同<br>只有for没有while语句</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestWhileLoop</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	n := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> n &lt; <span class="number">5</span> &#123;</span><br><span class="line">		t.Log(n)</span><br><span class="line">		n++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-12-条件语句"><a href="#2-12-条件语句" class="headerlink" title="2.12 条件语句"></a>2.12 条件语句</h3><h4 id="2-12-1-if-条件"><a href="#2-12-1-if-条件" class="headerlink" title="2.12.1 if 条件"></a>2.12.1 if 条件</h4><p>与其他语言的差异</p>
<ol>
<li>condition表达式结果必须为布尔值</li>
<li>支持变量赋值：</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">var</span> declaration; condition &#123;</span><br><span class="line">    <span class="comment">//code to be executed if condition is true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-12-2-switch条件"><a href="#2-12-2-switch条件" class="headerlink" title="2.12.2 switch条件"></a>2.12.2 switch条件</h4><ol>
<li>条件表达式不限制为常量或者整数</li>
<li>单个case中，可以出现多个结果，使用逗号分隔</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSwitchMultiCase</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">switch</span> i &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>, <span class="number">2</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;Even&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>, <span class="number">3</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;Odd&quot;</span>)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;it is not 0-3&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>与C语言等规则相反，Go语言不需要用break来明确退出一个case</p>
</li>
<li><p>可以不设定switch之后的条件表达式，在此种情况下，整个switch结构与多个if…else…的逻辑作用等同</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSwitchCaseCondition</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">switch</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> i%<span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;Even&quot;</span>)</span><br><span class="line">		<span class="keyword">case</span> i%<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;Odd&quot;</span>)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			t.Log(<span class="string">&quot;unknow&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>fallthrough</p>
</li>
</ol>
<p>使用 fallthrough 会强制执行后面的 case 语句，fallthrough 不会判断下一条 case 的表达式结果是否为 true。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;1、case 条件语句为 false&quot;</span>)</span><br><span class="line">            <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> <span class="literal">true</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;2、case 条件语句为 true&quot;</span>)</span><br><span class="line">            <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;3、case 条件语句为 false&quot;</span>)</span><br><span class="line">            <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">case</span> <span class="literal">true</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;4、case 条件语句为 true&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">false</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;5、case 条件语句为 false&quot;</span>)</span><br><span class="line">            <span class="keyword">fallthrough</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(<span class="string">&quot;6、默认 case&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码执行结果为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2、<span class="keyword">case</span> 条件语句为 <span class="literal">true</span></span><br><span class="line">3、<span class="keyword">case</span> 条件语句为 <span class="literal">false</span></span><br><span class="line">4、<span class="keyword">case</span> 条件语句为 <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>switch 从第一个判断表达式为 true 的 case 开始执行，如果 case 带有 fallthrough，程序会继续执行下一条 case，且它不会去判断下一个 case 的表达式是否为 true。</p>
<h4 id="2-12-3-select语句"><a href="#2-12-3-select语句" class="headerlink" title="2.12.3 select语句"></a>2.12.3 select语句</h4><p>select语句只能用于通道。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch4 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">4</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> e, ok := &lt;-ch4:</span><br><span class="line">			<span class="keyword">if</span> !ok &#123;</span><br><span class="line">				fmt.Println(<span class="string">&quot;End.&quot;</span>)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(e)</span><br><span class="line">			<span class="built_in">close</span>(ch4)</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			fmt.Println(<span class="string">&quot;No Data!&quot;</span>)</span><br><span class="line">			ch4 &lt;- <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="03-常用集合"><a href="#03-常用集合" class="headerlink" title="03 常用集合"></a>03 常用集合</h2><h3 id="3-0-概览"><a href="#3-0-概览" class="headerlink" title="3.0 概览"></a>3.0 概览</h3><p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011327626.png"></p>
<h3 id="3-1-数组"><a href="#3-1-数组" class="headerlink" title="3.1 数组"></a>3.1 数组</h3><ul>
<li><p>数组的传递是值传递</p>
</li>
<li><p>[10]int和[20]int是不同的类型</p>
</li>
<li><p>调用func f(arr [10]int) 会 <strong>拷贝</strong> 数组</p>
</li>
<li><p>数组的定义和声明</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestArrayInit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> arr [<span class="number">3</span>]<span class="type">int</span> <span class="comment">//声明并初始化为默认零值</span></span><br><span class="line">	arr1 := [<span class="number">4</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	arr3 := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;、</span><br><span class="line">    arr4 := [<span class="number">2</span>]][<span class="number">2</span>]<span class="type">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>&#125;&#125;</span><br><span class="line">	arr1[<span class="number">1</span>] = <span class="number">5</span></span><br><span class="line">	t.Log(arr[<span class="number">1</span>], arr[<span class="number">2</span>])</span><br><span class="line">	t.Log(arr1, arr3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>数组元素遍历</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestArrayTravel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	arr3 := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr3); i++ &#123;</span><br><span class="line">		t.Log(arr3[i])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, e := <span class="keyword">range</span> arr3 &#123;</span><br><span class="line">		t.Log(e)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>数组截取</li>
</ul>
<p>截取时是左闭右开区间<br>如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="type">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">a[<span class="number">1</span>:<span class="number">2</span>] <span class="comment">// 2</span></span><br><span class="line">a[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">// 2,3</span></span><br><span class="line">a[<span class="number">1</span>:<span class="built_in">len</span>(a)] <span class="comment">// 2,3,4,5</span></span><br><span class="line">a[<span class="number">1</span>:] <span class="comment">// 2,3,4,5</span></span><br><span class="line">a[:<span class="number">3</span>] <span class="comment">// 1,2,3</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-切片"><a href="#3-2-切片" class="headerlink" title="3.2 切片"></a>3.2 切片</h3><ul>
<li>切片的定义</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceInit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s0 []<span class="type">int</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(s0), <span class="built_in">cap</span>(s0))</span><br><span class="line">	s0 = <span class="built_in">append</span>(s0, <span class="number">1</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s0), <span class="built_in">cap</span>(s0))</span><br><span class="line"></span><br><span class="line">	s1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line"></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">	t.Log(s2[<span class="number">0</span>], s2[<span class="number">1</span>], s2[<span class="number">2</span>])</span><br><span class="line">	s2 = <span class="built_in">append</span>(s2, <span class="number">1</span>)</span><br><span class="line">	t.Log(s2[<span class="number">0</span>], s2[<span class="number">1</span>], s2[<span class="number">2</span>], s2[<span class="number">3</span>]) <span class="comment">//0 0 0 1</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中len个元素会被初始化为零值，未初始化元素不可访问，会出现编译错误</p>
<ul>
<li>切片中len和cap的关系</li>
</ul>
<p>可以通过如下程序看出len和cap的关系</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceGrowing</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	s := []<span class="type">int</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		s = <span class="built_in">append</span>(s, i)</span><br><span class="line">		t.Log(<span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以发现随着len的长度空间不够，cap会以倍数增加。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">slice_test.go:26: 1 1</span><br><span class="line">slice_test.go:26: 2 2</span><br><span class="line">slice_test.go:26: 3 4</span><br><span class="line">slice_test.go:26: 4 4</span><br><span class="line">slice_test.go:26: 5 8</span><br><span class="line">slice_test.go:26: 6 8</span><br><span class="line">slice_test.go:26: 7 8</span><br><span class="line">slice_test.go:26: 8 8</span><br><span class="line">slice_test.go:26: 9 16</span><br><span class="line">slice_test.go:26: 10 16</span><br></pre></td></tr></table></figure>

<ul>
<li>共享存储结构</li>
</ul>
<p>切片的访问的数据可以与其他切片共享，如果被某个切片修改，则会影响其他切片<br><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011322022.png"></p>
<p><strong>代码示例：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceShareMemory</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	year := []<span class="type">string</span>&#123;<span class="string">&quot;Jan&quot;</span>, <span class="string">&quot;Feb&quot;</span>, <span class="string">&quot;Mar&quot;</span>, <span class="string">&quot;Apr&quot;</span>, <span class="string">&quot;May&quot;</span>, <span class="string">&quot;Jun&quot;</span>, <span class="string">&quot;Jul&quot;</span>, <span class="string">&quot;Aug&quot;</span>, <span class="string">&quot;Sep&quot;</span>,</span><br><span class="line">		<span class="string">&quot;Oct&quot;</span>, <span class="string">&quot;Nov&quot;</span>, <span class="string">&quot;Dec&quot;</span>&#125;</span><br><span class="line">	Q2 := year[<span class="number">3</span>:<span class="number">6</span>]</span><br><span class="line">	t.Log(Q2, <span class="built_in">len</span>(Q2), <span class="built_in">cap</span>(Q2))</span><br><span class="line">	summer := year[<span class="number">5</span>:<span class="number">8</span>]</span><br><span class="line">	t.Log(summer, <span class="built_in">len</span>(summer), <span class="built_in">cap</span>(summer))</span><br><span class="line">	summer[<span class="number">0</span>] = <span class="string">&quot;Unknow&quot;</span></span><br><span class="line">	t.Log(Q2)</span><br><span class="line">	t.Log(year) <span class="comment">//[Jan Feb Mar Apr May Unknow Jul Aug Sep Oct Nov Dec]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>两切片不可以直接比较</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceComparing</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	b := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	<span class="comment">// if a == b &#123; //切片只能和nil比较 </span></span><br><span class="line">	<span class="comment">// 	t.Log(&quot;equal&quot;)</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line">	t.Log(a, b) <span class="comment">//[1 2 3 4] [1 2 3 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ol>
<li>数组可以直接比较，容量固定，可以截取访问</li>
<li>切片不可以直接比较，容量可以自动扩充，可以直接访问len长度的元素，越界编译出错</li>
</ol>
<ul>
<li>切片扩容</li>
</ul>
<p>每一个切片都有一个底层数组，切片的底层数组什么时候会被替换？</p>
<p>确切地说，一个切片的底层数组永远不会被替换。为什么？虽然在扩容的时候 Go 语言一定会生成新的底层数组，但是它也同时生成了新的切片。它只是把新的切片作为了新底层数组的窗口，而没有对原切片，及其底层数组做任何改动。请记住，在无需扩容时，append函数返回的是指向原底层数组的新切片，而在需要扩容时，append函数返回的是指向新底层数组的新切片。</p>
<h3 id="3-3-Map"><a href="#3-3-Map" class="headerlink" title="3.3 Map"></a>3.3 Map</h3><ul>
<li><p>创建：make(map[string]int)</p>
</li>
<li><p>获取元素：m[key]</p>
</li>
<li><p>key不存在时，获取value类型的初值</p>
</li>
<li><p>用value, ok :&#x3D; m[key]来判断是否存在key</p>
</li>
<li><p>用delete删除一个key</p>
</li>
<li><p>使用range遍历key，或者遍历key,value对</p>
</li>
<li><p>不保证遍历顺序，如需顺序，需手动对key排序</p>
</li>
<li><p>使用len获得元素个数</p>
</li>
<li><p>map使用哈希表，必须可以比较相等</p>
</li>
<li><p>除了slice，map，function的内建类型都可以作为key</p>
</li>
<li><p>struct类型不包含上述字段，也可作为key</p>
</li>
<li><p>Map的定义</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestInitMap</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">4</span>, <span class="number">3</span>: <span class="number">9</span>&#125;</span><br><span class="line">	t.Log(m1[<span class="number">2</span>])</span><br><span class="line">	t.Logf(<span class="string">&quot;len m1=%d&quot;</span>, <span class="built_in">len</span>(m1)) <span class="comment">// m1=3</span></span><br><span class="line">	m2 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	m2[<span class="number">4</span>] = <span class="number">16</span></span><br><span class="line">	t.Logf(<span class="string">&quot;len m2=%d&quot;</span>, <span class="built_in">len</span>(m2)) <span class="comment">// m2=1</span></span><br><span class="line">	m3 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line">	t.Logf(<span class="string">&quot;len m3=%d&quot;</span>, <span class="built_in">len</span>(m3)) <span class="comment">// m3=0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>map类型在使用make函数时只需要两个参数，第二个参数是map的cap长度</p>
<ul>
<li>Map的遍历</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestTravelMap</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">4</span>, <span class="number">3</span>: <span class="number">9</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		t.Log(k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>判断Map的key是否存在</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAccessNotExistingKey</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	m1 := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>&#123;&#125;</span><br><span class="line">	t.Log(m1[<span class="number">1</span>])</span><br><span class="line">	m1[<span class="number">2</span>] = <span class="number">0</span></span><br><span class="line">	t.Log(m1[<span class="number">2</span>])</span><br><span class="line">	m1[<span class="number">3</span>] = <span class="number">0</span></span><br><span class="line">	<span class="keyword">if</span> v, ok := m1[<span class="number">3</span>]; ok &#123;  <span class="comment">// 为true表示存在</span></span><br><span class="line">		t.Logf(<span class="string">&quot;Key 3&#x27;s value is %d&quot;</span>, v)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		t.Log(<span class="string">&quot;key 3 is not existing.&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除Map中的某个元素</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMapForSet</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	mySet := <span class="keyword">map</span>[<span class="type">int</span>]<span class="type">bool</span>&#123;&#125;</span><br><span class="line">	mySet[<span class="number">1</span>] = <span class="literal">true</span></span><br><span class="line">	mySet[<span class="number">3</span>] = <span class="literal">true</span></span><br><span class="line">	n := <span class="number">3</span></span><br><span class="line">	<span class="keyword">if</span> _, ok := mySet[n]; ok &#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;%d is existing&quot;</span>, n)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;%d is not existing&quot;</span>, n)</span><br><span class="line">	&#125;</span><br><span class="line">	mySet[<span class="number">3</span>] = <span class="literal">true</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(mySet))</span><br><span class="line">	<span class="built_in">delete</span>(mySet, <span class="number">3</span>)  <span class="comment">// 删除key为3的元素</span></span><br><span class="line">	<span class="keyword">if</span> _, ok := mySet[n]; ok &#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;%d is existing&quot;</span>, n)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		t.Logf(<span class="string">&quot;%d is not existing&quot;</span>, n)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Map的value可以是函数</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMapWithFunValue</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	m := <span class="keyword">map</span>[<span class="type">int</span>]<span class="function"><span class="keyword">func</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;&#125;</span><br><span class="line">	m[<span class="number">1</span>] = <span class="function"><span class="keyword">func</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="keyword">return</span> op &#125;</span><br><span class="line">	m[<span class="number">2</span>] = <span class="function"><span class="keyword">func</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="keyword">return</span> op * op &#125;</span><br><span class="line">	m[<span class="number">3</span>] = <span class="function"><span class="keyword">func</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="keyword">return</span> op * op * op &#125;</span><br><span class="line">	t.Log(m[<span class="number">1</span>](<span class="number">2</span>), m[<span class="number">2</span>](<span class="number">2</span>), m[<span class="number">3</span>](<span class="number">2</span>)) <span class="comment">//2 4 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>练习：映射</strong></li>
</ul>
<p>统计字符串中每个单词的个数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;golang.org/x/tour/wc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WordCount</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span> &#123;</span><br><span class="line">	array_s := strings.Fields(s)</span><br><span class="line">	fmt.Println(array_s)</span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> array_s &#123;</span><br><span class="line">		m[v] += <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> m</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	wc.Test(WordCount)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="04-字符串"><a href="#04-字符串" class="headerlink" title="04 字符串"></a>04 字符串</h2><ol>
<li>string 是数据类型，不是引用或指针类型</li>
<li>string 是只读的byte slice，len函数可以获取所含的byte数</li>
<li>string 的byte数组可以存放任何数据</li>
</ol>
<ul>
<li>rune类型</li>
</ul>
<p>string底层是通过byte数组实现，中文字符在unicode下占两个字节，在utf-8编码下占3个字节，goland中默认编码就是utf-8<br>rune类型可以处理unicode字符</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestString</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="type">string</span></span><br><span class="line">	t.Log(s) <span class="comment">//初始化为默认零值“”</span></span><br><span class="line">	s = <span class="string">&quot;hello&quot;</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(s))</span><br><span class="line">	<span class="comment">//s[1] = &#x27;3&#x27; //string是不可变的byte slice</span></span><br><span class="line">	<span class="comment">//s = &quot;\xE4\xB8\xA5&quot; //可以存储任何二进制数据</span></span><br><span class="line">	s = <span class="string">&quot;\xE4\xBA\xBB\xFF&quot;</span></span><br><span class="line">	t.Log(s)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s))</span><br><span class="line">	s = <span class="string">&quot;中&quot;</span></span><br><span class="line">	t.Log(<span class="built_in">len</span>(s)) <span class="comment">//是byte数  3</span></span><br><span class="line"></span><br><span class="line">	c := []<span class="type">rune</span>(s)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(c))   <span class="comment">// 1</span></span><br><span class="line">	t.Logf(<span class="string">&quot;中 unicode %x&quot;</span>, c[<span class="number">0</span>])</span><br><span class="line">	t.Logf(<span class="string">&quot;中 UTF8 %x&quot;</span>, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-参考资料"><a href="#4-1-参考资料" class="headerlink" title="4.1 参考资料"></a>4.1 参考资料</h3><p>string常用功能包</p>
<ol>
<li>strings包<a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/">(https://golang.org/pkg/strings/)</a></li>
<li>strconv包<a target="_blank" rel="noopener" href="https://golang.org/pkg/strconv/"> (https://golang.org/pkg/strconv/)</a></li>
</ol>
<p>示例：</p>
<ol>
<li>字符串切割</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestStringFn</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	s := <span class="string">&quot;A,B,C&quot;</span></span><br><span class="line">	parts := strings.Split(s, <span class="string">&quot;,&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> _, part := <span class="keyword">range</span> parts &#123;</span><br><span class="line">		t.Log(part)</span><br><span class="line">	&#125;</span><br><span class="line">	t.Log(strings.Join(parts, <span class="string">&quot;-&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>字符串与整型转换<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestConv</span><span class="params">(t *testing.T)</span></span> &#123;  </span><br><span class="line">    s := strconv.Itoa(<span class="number">10</span>)  </span><br><span class="line">    t.Log(<span class="string">&quot;str&quot;</span> + s) <span class="comment">// str10  </span></span><br><span class="line">    <span class="keyword">if</span> i, err := strconv.Atoi(<span class="string">&quot;10&quot;</span>); err == <span class="literal">nil</span> &#123;  </span><br><span class="line">       t.Log(<span class="number">10</span> + i) <span class="comment">// 20  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="05-函数"><a href="#05-函数" class="headerlink" title="05 函数"></a>05 函数</h2><ul>
<li><p>可以有多个返回值</p>
</li>
<li><p>所有参数都是值传递：slice，map，channel会有引用的错觉</p>
<blockquote>
<p>因为slice是共享结构，所以在函数内修改后，函数外会感知</p>
</blockquote>
</li>
<li><p>函数可以作为变量的值</p>
</li>
<li><p>函数可以作为参数和返回值</p>
</li>
<li><p>函数作为参数的定义</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> IntConv <span class="function"><span class="keyword">func</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">timeSpent</span><span class="params">(inner IntConv)</span></span> IntConv &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		start := time.Now()</span><br><span class="line">		ret := inner(n)</span><br><span class="line">		fmt.Println(<span class="string">&quot;time spent:&quot;</span>, time.Since(start).Seconds())</span><br><span class="line">		<span class="keyword">return</span> ret</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">slowFun</span><span class="params">(op <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">return</span> op</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFn</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	tsSF := timeSpent(slowFun)</span><br><span class="line">	t.Log(tsSF(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数作为参数，并且计算函数运行时间</p>
</li>
</ul>
<h3 id="5-1-可变参数"><a href="#5-1-可变参数" class="headerlink" title="5.1 可变参数"></a>5.1 可变参数</h3><p>可变参数的函数定义</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sum</span><span class="params">(ops ...<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	ret := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> _, op := <span class="keyword">range</span> ops &#123;</span><br><span class="line">		ret += op</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestVarParam</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	t.Log(Sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">	t.Log(Sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以定义接收任何类型的可变参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可变参数...interface&#123;&#125;做为函数参数的类型判断</span></span><br><span class="line"><span class="comment">//1.在函数[actionVariables3],增加功能，判断可变参数的类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">actionVariables3</span><span class="params">(args ...<span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> _,value := <span class="keyword">range</span> args &#123;</span><br><span class="line">        <span class="keyword">switch</span> value.(<span class="keyword">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">int</span>:</span><br><span class="line">            fmt.Println(value,<span class="string">&quot;int&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">string</span>:</span><br><span class="line">            fmt.Println(value,<span class="string">&quot;string&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">float64</span>:</span><br><span class="line">            fmt.Println(value,<span class="string">&quot;float64&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">bool</span>:</span><br><span class="line">            fmt.Println(value,<span class="string">&quot;bool&quot;</span>)</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            fmt.Println(value,<span class="string">&quot;unknow&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.调用</span></span><br><span class="line">actionVariables3(<span class="number">1</span>,<span class="string">&quot;我是波哥&quot;</span>,<span class="number">3.14</span>,<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p>可变参数，类似于切片，go语言里有很多，可变参数是go语言的特性。</p>
<h3 id="5-2-defer的使用"><a href="#5-2-defer的使用" class="headerlink" title="5.2 defer的使用"></a>5.2 defer的使用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestDefer</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Clear resources.&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	fmt.Println(<span class="string">&quot;Start&quot;</span>)</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;err&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>defer可以延迟执行，但会在panic之前执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Start</span><br><span class="line">Clear resources.</span><br><span class="line">--- FAIL: TestDefer (0.00s)</span><br><span class="line">panic: err [recovered]</span><br><span class="line">	panic: err</span><br></pre></td></tr></table></figure>

<h3 id="5-3-递归函数"><a href="#5-3-递归函数" class="headerlink" title="5.3 递归函数"></a>5.3 递归函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- <span class="number">1.</span>定义函数[fibonaci]实现</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonaci</span><span class="params">(index <span class="type">int64</span>)</span></span> <span class="type">int64</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">1</span> || index == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fibonaci(index<span class="number">-1</span>) + fibonaci(index<span class="number">-2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">- <span class="number">2.</span>调用</span><br><span class="line"><span class="comment">//第20位置对应的值</span></span><br><span class="line">fmt.Println(fibonaci(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<h3 id="5-4-匿名函数"><a href="#5-4-匿名函数" class="headerlink" title="5.4 匿名函数"></a>5.4 匿名函数</h3><p>没有名字的函数被称为匿名函数，当一个函数仅使用一次的时候，可定义为匿名函数</p>
<ol>
<li>使用方式一</li>
</ol>
<p>定义一个匿名函数实现两个数的加和，定义的时候并调用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sumVariables := <span class="function"><span class="keyword">func</span><span class="params">(var1,var2 <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> var1 + var2</span><br><span class="line">    &#125;(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    fmt.Println(sumVariables)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用方式二</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将一个匿名函数赋值给一个变量，这个变量存储的是这个匿名的地址</span></span><br><span class="line">func1 := <span class="function"><span class="keyword">func</span><span class="params">(var1,var2 <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> var1 - var2</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;func1调用的值=%d,func1=%p\n&quot;</span>,func1(<span class="number">1</span>,<span class="number">2</span>),&amp;func1)</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func1调用的值=-1,func1=0xc00008c000</span><br></pre></td></tr></table></figure>

<h3 id="5-5-闭包"><a href="#5-5-闭包" class="headerlink" title="5.5 闭包"></a>5.5 闭包</h3><p>首先它是一个函数，是函数与函数外部数据的引用（在函数内部引用了函数体外部的数据）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">clousure</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int64</span>)</span></span> <span class="type">int64</span> &#123;</span><br><span class="line">     <span class="keyword">var</span> step <span class="type">int64</span> = <span class="number">0</span></span><br><span class="line">     <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(_step <span class="type">int64</span>)</span></span> <span class="type">int64</span> &#123;</span><br><span class="line">          <span class="comment">//函数内部引用函数外部的数据</span></span><br><span class="line">       step +=  _step</span><br><span class="line">       <span class="keyword">return</span> step</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func2 := clousure()</span><br><span class="line">fmt.Println(func2(<span class="number">1</span>))</span><br><span class="line">fmt.Println(func2(<span class="number">2</span>))</span><br><span class="line">fmt.Println(func2(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br><span class="line">6</span><br></pre></td></tr></table></figure>

<h2 id="07-错误处理"><a href="#07-错误处理" class="headerlink" title="07 错误处理"></a>07 错误处理</h2><h3 id="7-1-错误机制"><a href="#7-1-错误机制" class="headerlink" title="7.1 错误机制"></a>7.1 错误机制</h3><ol>
<li>没有异常机制</li>
<li>error类型实现了error接口</li>
<li>可以通过errors.New来快速创建错误实例</li>
</ol>
<p><code>errors.New(&quot;n must be in the range [0,100]&quot;)</code></p>
<p>通过errors定义不同的错误变量，以便于判断错误类型<br><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011323252.png"></p>
<h3 id="7-2-panic和recover"><a href="#7-2-panic和recover" class="headerlink" title="7.2 panic和recover"></a>7.2 panic和recover</h3><ul>
<li>panic</li>
</ul>
<ol>
<li>panic用于不可以恢复的错误</li>
<li>panic退出前会执行defer指定的内容</li>
<li>panic会打印出当前调用栈</li>
</ol>
<ul>
<li>panic vs os.Exit</li>
</ul>
<ol>
<li>os.Exit退出时不会调用defer指定的函数</li>
<li>os.Exit退出时不输出当前调用栈信息</li>
</ol>
<ul>
<li>使用recover接收panic的错误</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPanicVxExit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;recovered from &quot;</span>, err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">	fmt.Println(<span class="string">&quot;Start&quot;</span>)</span><br><span class="line">	<span class="built_in">panic</span>(errors.New(<span class="string">&quot;Something wrong!&quot;</span>))</span><br><span class="line">	<span class="comment">//os.Exit(-1)</span></span><br><span class="line">	<span class="comment">//fmt.Println(&quot;End&quot;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>recover应该谨慎使用，因为recover可以捕捉panic错误，使程序不用退出，但如果捕捉后不做正确处理，可能形成僵尸程序，导致health check失效，还不如直接使用panic使程序退出，然后使用程序的守护进程重启程序。</p>
<h3 id="7-3-异常处理示例"><a href="#7-3-异常处理示例" class="headerlink" title="7.3 异常处理示例"></a>7.3 异常处理示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">receivePanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> coverPanic()</span><br><span class="line">	<span class="built_in">panic</span>(errors.New(<span class="string">&quot;I am error&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">coverPanic</span><span class="params">()</span></span> &#123;</span><br><span class="line">	message := <span class="built_in">recover</span>()</span><br><span class="line">	<span class="keyword">switch</span> message.(<span class="keyword">type</span>) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="type">string</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;string message : &quot;</span>, message)</span><br><span class="line">	<span class="keyword">case</span> <span class="type">error</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;error message : &quot;</span>, message)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">&quot;Unknown panic : &quot;</span>, message)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	receivePanic()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h2 id="09-并发编程"><a href="#09-并发编程" class="headerlink" title="09 并发编程"></a>09 并发编程</h2><h3 id="9-1-协程机制"><a href="#9-1-协程机制" class="headerlink" title="9.1 协程机制"></a>9.1 协程机制</h3><p>Thread vs. Groutine</p>
<ol>
<li>创建时默认的stack大小</li>
</ol>
<ul>
<li>JDK5以后Java Thread stack默认为1M</li>
<li>Groutine的stack初始化大小为2K</li>
</ul>
<ol start="2">
<li>和KSE（Kernel Space Entity）的对应关系</li>
</ol>
<ul>
<li>Java Thread 是1:1</li>
<li>Groutine是 M:N</li>
</ul>
<p>Groutine的机制是在用户空间由用户控制线程的切换，又因为KSE中M:N的关系，不会造成内核空间切换</p>
<p><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011323220.png"></p>
<h3 id="9-2-共享内存并发机制"><a href="#9-2-共享内存并发机制" class="headerlink" title="9.2 共享内存并发机制"></a>9.2 共享内存并发机制</h3><ul>
<li>Lock 和 WaitGroup</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCounterWaitGroup</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> mut sync.Mutex</span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	counter := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++ &#123;</span><br><span class="line">		wg.Add(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">				mut.Unlock()</span><br><span class="line">			&#125;()</span><br><span class="line">			mut.Lock()</span><br><span class="line">			counter++</span><br><span class="line">			wg.Done()</span><br><span class="line">		&#125;()</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line">	t.Logf(<span class="string">&quot;counter = %d&quot;</span>, counter)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">counter = 5000</span><br></pre></td></tr></table></figure>
<p>通过加锁实现并发Groutine共享变量</p>
<h3 id="9-3-CSP并发机制"><a href="#9-3-CSP并发机制" class="headerlink" title="9.3 CSP并发机制"></a>9.3 CSP并发机制</h3><p>Go中channel是有容量限制并且独立于处理Groutine<br>通过Channel控制并发：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">otherTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;working on something else&quot;</span>)</span><br><span class="line">	time.Sleep(time.Millisecond * <span class="number">100</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Task is done.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AsyncService</span><span class="params">()</span></span> <span class="keyword">chan</span> <span class="type">string</span> &#123;</span><br><span class="line">	retCh := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, <span class="number">1</span>)</span><br><span class="line">	<span class="comment">//retCh := make(chan string, 1)</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		ret := service()</span><br><span class="line">		fmt.Println(<span class="string">&quot;returned result.&quot;</span>)</span><br><span class="line">		retCh &lt;- ret</span><br><span class="line">		fmt.Println(<span class="string">&quot;service exited.&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> retCh</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAsynService</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	retCh := AsyncService()</span><br><span class="line">	otherTask()</span><br><span class="line">	fmt.Println(&lt;-retCh)</span><br><span class="line">	time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-4-多路选择和超时控制"><a href="#9-4-多路选择和超时控制" class="headerlink" title="9.4 多路选择和超时控制"></a>9.4 多路选择和超时控制</h3><p>通过select实现多路选择</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ServiceTime</span><span class="params">()</span></span> <span class="keyword">chan</span> <span class="type">string</span> &#123;</span><br><span class="line">	retCh := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, <span class="number">1</span>)</span><br><span class="line">	time.Sleep(time.Millisecond * <span class="number">50</span>)</span><br><span class="line">	ret := <span class="string">&quot;Done&quot;</span></span><br><span class="line">	retCh &lt;- ret</span><br><span class="line">	<span class="keyword">return</span> retCh</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSelect</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> &lt;-time.After(time.Millisecond * <span class="number">100</span>):  <span class="comment">//100毫秒超时</span></span><br><span class="line">		t.Error(<span class="string">&quot;time out&quot;</span>)</span><br><span class="line">	<span class="keyword">case</span> ret := &lt;-ServiceTime():</span><br><span class="line">		t.Log(ret)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以通过case实现接收不同channel消息，然后执行相应case</p>
<h3 id="9-5-Channel的关闭和广播"><a href="#9-5-Channel的关闭和广播" class="headerlink" title="9.5 Channel的关闭和广播"></a>9.5 Channel的关闭和广播</h3><ul>
<li>向关闭的channel发送数据会导致panic</li>
<li>读取关闭的channel，不会阻塞，返回是0</li>
<li>v, ok &lt;- ch; ok为bool值，true表示正常接收，false表示通道关闭</li>
<li>所有的channel接收者都会在channel关闭时，立即从阻塞等待中返回且上诉ok值为false，可以用此，想多个订阅者发送退出信号。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dataProducer</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">int</span>, wg *sync.WaitGroup)</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">			ch &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">close</span>(ch) <span class="comment">//生产者发送完数据后关闭channel</span></span><br><span class="line">		wg.Done()</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dataReceiver</span><span class="params">(ch <span class="keyword">chan</span> <span class="type">int</span>, wg *sync.WaitGroup)</span></span> &#123;</span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> data, ok := &lt;-ch; ok &#123;</span><br><span class="line">				fmt.Println(data)</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		wg.Done()</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCloseChannel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	wg.Add(<span class="number">1</span>)</span><br><span class="line">	dataProducer(ch, &amp;wg)</span><br><span class="line">	wg.Add(<span class="number">1</span>)</span><br><span class="line">	dataReceiver(ch, &amp;wg)</span><br><span class="line">	<span class="comment">// wg.Add(1)</span></span><br><span class="line">	<span class="comment">// dataReceiver(ch, &amp;wg)</span></span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-6-Context与任务取消"><a href="#9-6-Context与任务取消" class="headerlink" title="9.6 Context与任务取消"></a>9.6 Context与任务取消</h3><ul>
<li>根Context：通过context.Background()创建</li>
<li>子Context：context.WithCancel(parentContext)创建<ul>
<li>ctx, cancel :&#x3D; context.WithCancel(context.Background())</li>
</ul>
</li>
<li>当前Context被取消时，基于他的子context都会被取消</li>
<li>接收取消通知 &lt;-ctx.Done()</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isCancelled</span><span class="params">(ctx context.Context)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> &lt;-ctx.Done():</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestCancel</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	ctx, cancel := context.WithCancel(context.Background())</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>, ctx context.Context)</span></span> &#123;</span><br><span class="line">			<span class="keyword">for</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> isCancelled(ctx) &#123;</span><br><span class="line">					<span class="keyword">break</span></span><br><span class="line">				&#125;</span><br><span class="line">				time.Sleep(time.Millisecond * <span class="number">5</span>)</span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(i, <span class="string">&quot;Cancelled&quot;</span>)</span><br><span class="line">		&#125;(i, ctx)</span><br><span class="line">	&#125;</span><br><span class="line">	cancel()</span><br><span class="line">	time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="9-7-多协程间的通信"><a href="#9-7-多协程间的通信" class="headerlink" title="9.7 多协程间的通信"></a>9.7 多协程间的通信</h3><p>两个协程通过channel进行数据通信</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ch1 <span class="keyword">chan</span> <span class="type">int</span> = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">var</span> ch2 <span class="keyword">chan</span> <span class="type">int</span> = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//从channel中读取数据</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Read</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> num := &lt;-ch1:</span><br><span class="line">			fmt.Println(num)</span><br><span class="line">		<span class="keyword">case</span> &lt;-ch2:</span><br><span class="line">			fmt.Println(<span class="string">&quot;ch2&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//向channel中写入数据</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Write</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ch1 &lt;- <span class="number">1</span></span><br><span class="line">	time.Sleep(time.Microsecond * <span class="number">10</span>)</span><br><span class="line">	ch1 &lt;- <span class="number">2</span></span><br><span class="line">	time.Sleep(time.Microsecond * <span class="number">10</span>)</span><br><span class="line">	ch2 &lt;- <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//获取电脑cpu数量</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;cpu num = %d\n&quot;</span>, runtime.NumCPU())</span><br><span class="line">	runtime.GOMAXPROCS(runtime.NumCPU() - <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">go</span> Write()</span><br><span class="line">	<span class="keyword">go</span> Read()</span><br><span class="line">	time.Sleep(time.Second * <span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-8-多协程间的同步"><a href="#9-8-多协程间的同步" class="headerlink" title="9.8 多协程间的同步"></a>9.8 多协程间的同步</h3><p>系统提供的sync.waitgroup</p>
<ul>
<li>Add（delta int）添加协程记录</li>
<li>Done() 移除协程记录</li>
<li>Wait() 同步等待所有记录的协程全部结束</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> WG sync.WaitGroup</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSynWrite</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		WG.Add(<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSynRead</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;---&gt; Done %d\n&quot;</span>, i)</span><br><span class="line">		WG.Done()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//获取电脑cpu数量</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;cpu num = %d\n&quot;</span>, runtime.NumCPU())</span><br><span class="line">	runtime.GOMAXPROCS(runtime.NumCPU() - <span class="number">1</span>) <span class="comment">//设置协程使用的最大核心数</span></span><br><span class="line">	TestSynWrite()</span><br><span class="line">	<span class="keyword">go</span> TestSynRead()</span><br><span class="line">	WG.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-并发任务"><a href="#10-并发任务" class="headerlink" title="10 并发任务"></a>10 并发任务</h2><h3 id="10-1-多任务"><a href="#10-1-多任务" class="headerlink" title="10.1 多任务"></a>10.1 多任务</h3><ul>
<li>仅执行一次</li>
</ul>
<p>使用sync.Once确保函数只执行一次</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleInstance *Singleton</span><br><span class="line"><span class="keyword">var</span> once sync.Once</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetSingletonObj</span><span class="params">()</span></span> *Singleton &#123;</span><br><span class="line">	once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Create Obj&quot;</span>)</span><br><span class="line">		singleInstance = <span class="built_in">new</span>(Singleton)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">return</span> singleInstance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetSingletonObj</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		wg.Add(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			obj := GetSingletonObj()</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%X\n&quot;</span>, unsafe.Pointer(obj))</span><br><span class="line">			wg.Done()</span><br><span class="line">		&#125;()</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>会发现以上对象obj只创建一次，打印出的地址都是相同的</p>
<ul>
<li>任一任务完成，则返回</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">runTask</span><span class="params">(id <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	time.Sleep(<span class="number">10</span> * time.Millisecond)</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;The result is from %d&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FirstResponse</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	numOfRunner := <span class="number">10</span></span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, numOfRunner)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; numOfRunner; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">			ret := runTask(i)</span><br><span class="line">			ch &lt;- ret</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &lt;-ch</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFirstResponse</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	t.Log(<span class="string">&quot;Before:&quot;</span>, runtime.NumGoroutine())</span><br><span class="line">	t.Log(FirstResponse())</span><br><span class="line">	time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">	t.Log(<span class="string">&quot;After:&quot;</span>, runtime.NumGoroutine())</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时启动10个任务，只要任一任务完成，则channel中会有值，则立即返回，但为了防止其他Goroutine阻塞，则channel的大小和Goroutine的数量一致</p>
<ul>
<li>直到所有任务完成，才返回</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AllResponse</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	numOfRunner := <span class="number">10</span></span><br><span class="line">	ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>, numOfRunner)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; numOfRunner; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">			ret := runTask(i)</span><br><span class="line">			ch &lt;- ret</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line">	finalRet := <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; numOfRunner; j++ &#123;</span><br><span class="line">		finalRet += &lt;-ch + <span class="string">&quot;\n&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> finalRet</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改就是循环读取channel中所有数据</p>
<h3 id="10-2-sync-Pool的使用"><a href="#10-2-sync-Pool的使用" class="headerlink" title="10.2 sync.Pool的使用"></a>10.2 sync.Pool的使用</h3><ul>
<li>Sync.Pool总结</li>
</ul>
<ol>
<li>适合于通过复用，降低复杂对象的创建和GC代价</li>
<li>协程安全，会有锁的开销</li>
<li>生命周期受GC影响，不适合于做连接池等，需要自己管理生命周期的资源池化</li>
</ol>
<h2 id="11-测试"><a href="#11-测试" class="headerlink" title="11 测试"></a>11 测试</h2><p>以上笔记使用的都是单元测试的框架，可以编写单元模块进行执行，练习。</p>
<h3 id="11-1-内置单元测试框架"><a href="#11-1-内置单元测试框架" class="headerlink" title="11.1 内置单元测试框架"></a>11.1 内置单元测试框架</h3><ol>
<li>Fail，Error：该测试失败，该测试继续，其他测试继续执行</li>
<li>FailNow，Fatal：该测试失败，该测试中止，其他测试继续执行</li>
</ol>
<p>以上是测试接口的差异，下边代码示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestErrorInCode</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Start&quot;</span>)</span><br><span class="line">	t.Error(<span class="string">&quot;Error&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;End&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestFailInCode</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Start&quot;</span>)</span><br><span class="line">	t.Fatal(<span class="string">&quot;Error&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;End&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上TestFailInCode执行到Fatal后终止，并不会输出End</p>
<ul>
<li>代码覆盖率</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go test -v -cover</span><br></pre></td></tr></table></figure>
<p>使用以上命令行执行代码程序，可以展示出代码覆盖率。</p>
<ul>
<li>断言assert</li>
</ul>
<p>断言模块<br>github.com&#x2F;stretchr&#x2F;testify&#x2F;assert</p>
<p>使用断言时需要首先安装以上模块包</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAssert</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">	assert.Equal(t, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>以上测试两个参数相等，第二个参数是传入的值，第三个参数是期望值。</p>
<h3 id="11-2-Benchmark"><a href="#11-2-Benchmark" class="headerlink" title="11.2 Benchmark"></a>11.2 Benchmark</h3><p>Benchmark可以测试代码块的执行时间，以此测试代码性能。<br>使用方法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkConcatStringByAdd</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	elems := []<span class="type">string</span>&#123;<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>&#125;</span><br><span class="line">	b.ResetTimer()</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">		ret := <span class="string">&quot;&quot;</span></span><br><span class="line">		<span class="keyword">for</span> _, elem := <span class="keyword">range</span> elems &#123;</span><br><span class="line">			ret += elem</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	b.StopTimer()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出<br><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2023/202311011324314.png"><br>可以看到限制代码块执行时间120ns&#x2F;op</p>
<h3 id="11-3-BDD-in-go"><a href="#11-3-BDD-in-go" class="headerlink" title="11.3 BDD in go"></a>11.3 BDD in go</h3><p>项目网站：<br><a target="_blank" rel="noopener" href="https://github.com/smartystreets/goconvey">https://github.com/smartystreets/goconvey</a></p>
<p>安装<br>go get -u github.com&#x2F;smartystreets&#x2F;goconvey&#x2F;convey</p>
<p>启动WEB UI<br>$GOPATH&#x2F;bin&#x2F;goconvey</p>
<h2 id="12-反射编程"><a href="#12-反射编程" class="headerlink" title="12 反射编程"></a>12 反射编程</h2><h2 id="13-常见任务"><a href="#13-常见任务" class="headerlink" title="13 常见任务"></a>13 常见任务</h2><h3 id="13-1-json工具"><a href="#13-1-json工具" class="headerlink" title="13.1 json工具"></a>13.1 json工具</h3><ol>
<li>内置json解析</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//把json解析到指定结构</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Unmarshal</span><span class="params">(data []<span class="type">byte</span>, v <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//把指定结构转换成json</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Marshal</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span> ([]<span class="type">byte</span>, <span class="type">error</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>easyjson模块</li>
</ol>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/luslin1711/article/details/90244468">easyjson的使用</a><br>easyjson相对于内置json而言，解析更快，是通过代码生成，而非发射机制</p>
<p>需要首先安装easyjson模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/mailru/easyjson/...</span><br></pre></td></tr></table></figure>

<p>使用命令生成代码：<br>easyjson -all &lt;结构定义&gt;.go</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://baihlup.github.io">梦之痕</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://baihlup.github.io/2023/11/20/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&amp;%20Python/09%20-%20Go--%E5%9F%BA%E7%A1%80%E7%AF%87/">https://baihlup.github.io/2023/11/20/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&amp;%20Python/09%20-%20Go--%E5%9F%BA%E7%A1%80%E7%AF%87/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">程序设计</a><a class="post-meta__tags" href="/tags/Go/">Go</a></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2024/41710043961_.pic.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/21/260%20-%20%E5%90%8E%E7%AB%AF&amp;%E6%9E%B6%E6%9E%84/263%20-%20%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1/04%20-%20OpenResty%20%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="OpenResty 性能优化"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">OpenResty 性能优化</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/16/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&amp;%20Python/06%20-%20Python--%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8C%85/" title="Python--常用工具包"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Python--常用工具包</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/03/04/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/10%20-%20Go--%E8%BF%9B%E9%98%B6%E7%AF%87/" title="Go--进阶篇"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-04</div><div class="title">Go--进阶篇</div></div></a></div><div><a href="/2023/10/16/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/02%20-%20Python--%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="Python编程语言--面向对象"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-16</div><div class="title">Python编程语言--面向对象</div></div></a></div><div><a href="/2023/10/16/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/01%20-%20Python--%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Python编程语言--基础篇"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-16</div><div class="title">Python编程语言--基础篇</div></div></a></div><div><a href="/2023/10/20/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/03%20-%20Python--%E8%BF%9B%E9%98%B6%E7%AF%87/" title="Python编程语言--进阶篇"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-20</div><div class="title">Python编程语言--进阶篇</div></div></a></div><div><a href="/2023/11/16/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/213%20-%20Go%20&%20Python/06%20-%20Python--%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8C%85/" title="Python--常用工具包"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-16</div><div class="title">Python--常用工具包</div></div></a></div><div><a href="/2023/12/22/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/214%20-%20Java%20&%20Lua/01%20-%20Java--%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Java--基础篇"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-22</div><div class="title">Java--基础篇</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/BaihlUp/Figurebed/master/2024/41710043961_.pic.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">梦之痕</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/BaihlUp"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">个人笔记迁移中ing....</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.</span> <span class="toc-text">0 参考资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#01-%E7%AC%AC%E4%B8%80%E7%AB%A0-Go%E8%AF%AD%E8%A8%80%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">01 第一章 Go语言简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8CGOPATH"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 工作区和GOPATH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%BB%A3%E7%A0%81%E5%8C%85%E7%9A%84%E5%AF%BC%E5%85%A5"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 代码包的导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-Go%E7%9A%84%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.3.1 Go的依赖管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-go-mod"><span class="toc-number">2.3.2.</span> <span class="toc-text">1.3.2 go mod</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E6%80%BB%E7%BB%93"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#02-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">02 第二章 基本程序结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E9%80%80%E5%87%BA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 退出返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 获取命令行参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 编写测试程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 变量赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%B8%B8%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 常量的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%B8%B8%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.6.</span> <span class="toc-text">2.5 常量的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.7.</span> <span class="toc-text">2.6 基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88-%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">3.7.1.</span> <span class="toc-text">2.6.1 指针&#x2F;数组指针&#x2F;指针数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-%E6%8C%87%E9%92%88%E4%BD%BF%E7%94%A8"><span class="toc-number">3.7.2.</span> <span class="toc-text">2.6.2 指针使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">3.7.3.</span> <span class="toc-text">2.6.2 结构体</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.8.</span> <span class="toc-text">2.7 算术运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.9.</span> <span class="toc-text">2.8 比较运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.10.</span> <span class="toc-text">2.9 逻辑运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.11.</span> <span class="toc-text">2.10 位运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.12.</span> <span class="toc-text">2.11 循环语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-12-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.13.</span> <span class="toc-text">2.12 条件语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-1-if-%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.13.1.</span> <span class="toc-text">2.12.1 if 条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-2-switch%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.13.2.</span> <span class="toc-text">2.12.2 switch条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-3-select%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.13.3.</span> <span class="toc-text">2.12.3 select语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#03-%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88"><span class="toc-number">4.</span> <span class="toc-text">03 常用集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-0-%E6%A6%82%E8%A7%88"><span class="toc-number">4.1.</span> <span class="toc-text">3.0 概览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%95%B0%E7%BB%84"><span class="toc-number">4.2.</span> <span class="toc-text">3.1 数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%88%87%E7%89%87"><span class="toc-number">4.3.</span> <span class="toc-text">3.2 切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Map"><span class="toc-number">4.4.</span> <span class="toc-text">3.3 Map</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#04-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">5.</span> <span class="toc-text">04 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 参考资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#05-%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">05 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 可变参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-defer%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 defer的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-number">6.3.</span> <span class="toc-text">5.3 递归函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">6.4.</span> <span class="toc-text">5.4 匿名函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E9%97%AD%E5%8C%85"><span class="toc-number">6.5.</span> <span class="toc-text">5.5 闭包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#07-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">07 错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E9%94%99%E8%AF%AF%E6%9C%BA%E5%88%B6"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 错误机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-panic%E5%92%8Crecover"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 panic和recover</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%A4%BA%E4%BE%8B"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 异常处理示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#09-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">09 并发编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%8D%8F%E7%A8%8B%E6%9C%BA%E5%88%B6"><span class="toc-number">8.1.</span> <span class="toc-text">9.1 协程机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E5%B9%B6%E5%8F%91%E6%9C%BA%E5%88%B6"><span class="toc-number">8.2.</span> <span class="toc-text">9.2 共享内存并发机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-CSP%E5%B9%B6%E5%8F%91%E6%9C%BA%E5%88%B6"><span class="toc-number">8.3.</span> <span class="toc-text">9.3 CSP并发机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%A4%9A%E8%B7%AF%E9%80%89%E6%8B%A9%E5%92%8C%E8%B6%85%E6%97%B6%E6%8E%A7%E5%88%B6"><span class="toc-number">8.4.</span> <span class="toc-text">9.4 多路选择和超时控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-Channel%E7%9A%84%E5%85%B3%E9%97%AD%E5%92%8C%E5%B9%BF%E6%92%AD"><span class="toc-number">8.5.</span> <span class="toc-text">9.5 Channel的关闭和广播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-Context%E4%B8%8E%E4%BB%BB%E5%8A%A1%E5%8F%96%E6%B6%88"><span class="toc-number">8.6.</span> <span class="toc-text">9.6 Context与任务取消</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E5%A4%9A%E5%8D%8F%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">8.7.</span> <span class="toc-text">9.7 多协程间的通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E5%A4%9A%E5%8D%8F%E7%A8%8B%E9%97%B4%E7%9A%84%E5%90%8C%E6%AD%A5"><span class="toc-number">8.8.</span> <span class="toc-text">9.8 多协程间的同步</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%B9%B6%E5%8F%91%E4%BB%BB%E5%8A%A1"><span class="toc-number">9.</span> <span class="toc-text">10 并发任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E5%A4%9A%E4%BB%BB%E5%8A%A1"><span class="toc-number">9.1.</span> <span class="toc-text">10.1 多任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-sync-Pool%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">9.2.</span> <span class="toc-text">10.2 sync.Pool的使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%B5%8B%E8%AF%95"><span class="toc-number">10.</span> <span class="toc-text">11 测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%86%85%E7%BD%AE%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6"><span class="toc-number">10.1.</span> <span class="toc-text">11.1 内置单元测试框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-Benchmark"><span class="toc-number">10.2.</span> <span class="toc-text">11.2 Benchmark</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-BDD-in-go"><span class="toc-number">10.3.</span> <span class="toc-text">11.3 BDD in go</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%8F%8D%E5%B0%84%E7%BC%96%E7%A8%8B"><span class="toc-number">11.</span> <span class="toc-text">12 反射编程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E5%B8%B8%E8%A7%81%E4%BB%BB%E5%8A%A1"><span class="toc-number">12.</span> <span class="toc-text">13 常见任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-json%E5%B7%A5%E5%85%B7"><span class="toc-number">12.1.</span> <span class="toc-text">13.1 json工具</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/04/260%20-%20%E5%90%8E%E7%AB%AF&amp;%E6%9E%B6%E6%9E%84/261%20-%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/02%20-%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E6%88%98/" title="Untitled">Untitled</a><time datetime="2024-08-04T08:59:30.576Z" title="Created 2024-08-04 08:59:30">2024-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/04/000%20-%20Inbox/%E7%81%AB%E5%B1%B1%E4%BA%91waf/" title="Untitled">Untitled</a><time datetime="2024-08-04T08:59:30.480Z" title="Created 2024-08-04 08:59:30">2024-08-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/24/240%20-%20%E8%99%9A%E6%8B%9F%E5%8C%96&amp;%E4%BA%91%E8%AE%A1%E7%AE%97/244%20-%20%E4%BA%91%E5%8E%9F%E7%94%9F/01%20-%20Kuberbetes%20%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%EF%BC%88%E4%B8%80%EF%BC%89/" title="Kuberbetes 核心组件（一）">Kuberbetes 核心组件（一）</a><time datetime="2024-07-24T00:00:00.000Z" title="Created 2024-07-24 00:00:00">2024-07-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/07/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/214%20-%20Java%20&amp;%20Lua/09%20-%20Java--File%E7%B1%BB%E4%B8%8EIO%E6%B5%81/" title="Java--File类与IO流">Java--File类与IO流</a><time datetime="2024-07-07T00:00:00.000Z" title="Created 2024-07-07 00:00:00">2024-07-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/05/210%20-%20%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/214%20-%20Java%20&amp;%20Lua/05%20-%20Java--%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E5%9F%BA%E7%A1%80API/" title="Java--常用类和基础API">Java--常用类和基础API</a><time datetime="2024-07-05T00:00:00.000Z" title="Created 2024-07-05 00:00:00">2024-07-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 梦之痕</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>